<!DOCTYPE html>
<html lang="en, sr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lusteri | bend</title>
    <link rel='shortcut icon' type='image/x-icon' href='../assets/images/logos/lusteri-icon.png' />

    <link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Oswald:wght@200;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="../index.html" class="logo-link">
                <img src="../assets/images/logos/logo-orange.png" alt="Lusteri bend logo" title="Go to Home page"></a>
        </div>
        <nav>
            <a href="svirke.html">svirke</a>
            <a href="audio.html">audio</a>
            <a href="video.html">video</a>
            <a href="foto.html">foto</a>
            <a href="bio.html">bend</a>
            <a href="prodavnica.html">prodavnica</a>
            <a href="kontakt.html">kontakt</a>
        </nav>
    </header>
    <main>
        <section class="merchWrapper">
            <h1>prodavnica</h1>

            <div class="merchShop">
                    <div class="merchCard" tabindex="0" role="button"
     aria-label="Open product image: Gavran v.25">
                        <div class="merchImage">
                            <img src="../assets/images/merch/LusteriMajica2025.png" alt="Lusteri majica designed 2025">
                        </div>
                        <div class="merchType">Majica</div>
                        <div class="merchName strong">Gavran v.25</div>
                        <div class="merchPrice">1200din + troškovi dostave</div>
                        <div class="merchState on">Na stanju</div>
                        <div class="merchOrder">Naručite porukom putem društvenih mreža</div>
                        <div class="merchOrder">
                            <a href="https://www.instagram.com/lusteri" class="orderBtn" target="_blank" rel="noopener" aria-label="Naruči putem Instagrama">
                                Instagram
                            </a>
                            <a href="https://www.facebook.com/lusteri" class="orderBtn" target="_blank" rel="noopener" aria-label="Naruči putem Facebook-a">
                                Facebook
                            </a>
                        </div>
                    </div>
                    <div class="merchCard" tabindex="0" role="button"
     aria-label="Open product image: Nema kad v.20"
                        data-images="../assets/images/merch/321.png,../assets/images/merch/2020 back.png">
                        <div class="merchImage">
                            <img src="../assets/images/merch/321.png" alt="Lusteri majica designed 2020">
                        </div>
                        <div class="merchType">Majica</div>
                        <div class="merchName strong">Nema kad v.20</div>
                        <div class="merchPrice">1200din + troškovi dostave</div>
                        <div class="merchState off">Rasprodato</div>
                        <div class="merchOrder">Naručite porukom putem društvenih mreža</div>
                        <div class="merchOrder">
                            <a href="https://www.instagram.com/lusteribend/" class="orderBtn" target="_blank" rel="noopener" aria-label="Naruči putem Instagrama">
                                Instagram
                            </a>
                            <a href="https://www.facebook.com/lusteribend" class="orderBtn" target="_blank" rel="noopener" aria-label="Naruči putem Facebook-a">
                                Facebook
                            </a>
                        </div>
                        
                    </div>

            </div>
                
            
        </section>
        
        
    </main>
    <footer class="footer"></footer>

    <script type="text/javascript" src="../scripting.js"></script>
</body>

<script>
(() => {
  const cards = document.querySelectorAll('.merchCard');

  const overlay = document.createElement('div');
  overlay.className = 'imageZoomOverlay';
  document.body.appendChild(overlay);

  let images = [];
  let index = 0;
  let lastFocusedCard = null;

  cards.forEach(card => {
    card.addEventListener('click', () => openFromCard(card));

    card.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        openFromCard(card);
      }
    });
  });

  function openFromCard(card) {
    lastFocusedCard = card;

    const img = card.querySelector('.merchImage img');
    images = card.dataset.images
      ? card.dataset.images.split(',').map(i => i.trim())
      : [img.src];

    index = 0;
    render();
  }

  function render() {
    overlay.setAttribute('role', 'dialog');
    overlay.setAttribute('aria-modal', 'true');
    overlay.setAttribute('aria-label', 'Product image preview');

    overlay.innerHTML = `
      <div class="zoomWrapper" tabindex="0">
        ${images.length > 1 ? '<div class="zoomNav prev" role="button" tabindex="0" aria-label="Previous image">‹</div>' : ''}
        <img class="zoomImage" src="${images[index]}" alt="" />
        ${images.length > 1 ? '<div class="zoomNav next" role="button" tabindex="0" aria-label="Next image">›</div>' : ''}
        ${images.length > 1 ? `<div class="zoomCounter">${index + 1} / ${images.length}</div>` : ''}
      </div>
    `;

    overlay.classList.add('active');
    overlay.querySelector('.zoomWrapper').focus();

    overlay.querySelector('.prev')?.addEventListener('click', e => {
      e.stopPropagation();
      index = (index - 1 + images.length) % images.length;
      render();
    });

    overlay.querySelector('.next')?.addEventListener('click', e => {
      e.stopPropagation();
      index = (index + 1) % images.length;
      render();
    });
  }

overlay.addEventListener('click', e => {
  if (e.target === overlay) {
    closeOverlay();
  }
});

  document.addEventListener('keydown', e => {
    if (!overlay.classList.contains('active')) return;

    if (e.key === 'Escape') closeOverlay();
    if (e.key === 'ArrowRight' && images.length > 1) {
      index = (index + 1) % images.length;
      render();
    }
    if (e.key === 'ArrowLeft' && images.length > 1) {
      index = (index - 1 + images.length) % images.length;
      render();
    }
  });

  function closeOverlay() {
    overlay.classList.remove('active');
    overlay.innerHTML = '';
    lastFocusedCard?.focus();
  }
})();

document.querySelectorAll('.orderBtn').forEach(btn => {
  btn.addEventListener('click', e => {
    e.stopPropagation(); // klik ne prolazi do kartice
  });
});
</script>


</html>